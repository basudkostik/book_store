
<%- include('partials/header') %>

<div class="container">
 
        <!-- Sol Taraf: Kategori Filtreleri -->
       <aside class="sidebar">
    <h2>Filtreler</h2>
 
    <form action="/books" method="GET">

        <!-- Kitap AdÄ± -->
    <label for="book_name">Kitap AdÄ±</label>
     <input type="text" name="q" value="<%= searchTerm %>">

        <!-- TÃ¼r seÃ§imi --> 
        <label for="genre">TÃ¼r:</label>
        <select name="genre" id="genre">
            <option value="">TÃ¼m TÃ¼rler</option>
            <option value="Thriller" <%= genre === 'Thriller' ? 'selected' : '' %>>ğŸ”ª Gerilim</option>
            <option value="Self-Help" <%= genre === 'Self-Help' ? 'selected' : '' %>>ğŸ“˜ KiÅŸisel GeliÅŸim</option>
            <option value="Science Fiction" <%= genre === 'Science Fiction' ? 'selected' : '' %>>ğŸ‘½ Bilim Kurgu</option>
            <option value="Science" <%= genre === 'Science' ? 'selected' : '' %>>ğŸ”¬ Bilim</option>
            <option value="Romance" <%= genre === 'Romance' ? 'selected' : '' %>>â¤ï¸ Romantik</option>
            <option value="Psychology" <%= genre === 'Psychology' ? 'selected' : '' %>>ğŸ§  Psikoloji</option>
            <option value="Mythology" <%= genre === 'Mythology' ? 'selected' : '' %>>âš¡ Mitoloji</option>
            <option value="Mystery" <%= genre === 'Mystery' ? 'selected' : '' %>>ğŸ•µï¸ Gizem</option>
            <option value="Horror" <%= genre === 'Horror' ? 'selected' : '' %>>ğŸ‘» Korku</option>
            <option value="History" <%= genre === 'History' ? 'selected' : '' %>>ğŸº Tarih</option>
            <option value="Historical Fiction" <%= genre === 'Historical Fiction' ? 'selected' : '' %>>ğŸ“œ Tarihi Kurgu</option>
            <option value="Fiction" <%= genre === 'Fiction' ? 'selected' : '' %>>ğŸ“– Kurgu</option>
            <option value="Fantasy" <%= genre === 'Fantasy' ? 'selected' : '' %>>ğŸ‰ Fantastik</option>
            <option value="Dystopian" <%= genre === 'Dystopian' ? 'selected' : '' %>>ğŸŒ† Distopya</option>
            <option value="Classic" <%= genre === 'Classic' ? 'selected' : '' %>>ğŸ›ï¸ Klasik</option>
            <option value="Biography" <%= genre === 'Biography' ? 'selected' : '' %>>ğŸ‘¤ Biyografi</option>
            <option value="Adventure" <%= genre === 'Adventure' ? 'selected' : '' %>>ğŸ§­ Macera</option>
        </select>

        <!-- Fiyat aralÄ±ÄŸÄ± -->
        <label for="minPrice">Min Fiyat:</label>
        <input type="number" name="minPrice" id="minPrice" min="0" value="<%= minPrice %>">

        <label for="maxPrice">Max Fiyat:</label>
        <input type="number" name="maxPrice" id="maxPrice" min="0" value="<%= maxPrice %>">
        <!-- YayÄ±nevi -->

        <!-- Yazar -->
        <label for="author">Yazar:</label>
        <input type="text" name="author" id="author" value="<%= author %>">

            <!-- YayÄ±n YÄ±lÄ± -->
            <label for="minYear">YayÄ±n YÄ±lÄ± (Min):</label>
            <input type="number" name="minYear" id="minYear" value="<%= minYear %>" min="1900" max="2025">

            <label for="maxYear">YayÄ±n YÄ±lÄ± (Max):</label>
            <input type="number" name="maxYear" id="maxYear" value="<%= maxYear %>" min="1900" max="2025">

           
           

            <!-- Sayfa SayÄ±sÄ± -->
                    <label for="minPages">Min Sayfa:</label>
                    <input type="number" name="minPages" id="minPages" min="0" value="<%= minPages %>">

                    <label for="maxPages">Max Sayfa:</label>
                    <input type="number" name="maxPages" id="maxPages" min="0" value="<%= maxPages %>">

                    <!-- Puan -->
                    <label for="minRating">Min Puan:</label>
                    <input type="number" step="0.1" name="minRating" id="minRating" min="0" max="5" value="<%= minRating %>">

                    <label for="maxRating">Max Puan:</label>
                    <input type="number" step="0.1" name="maxRating" id="maxRating" min="0" max="5" value="<%= maxRating %>">

        <button type="submit">Filtrele</button>
    </form>
       </aside>

        <!-- SaÄŸ Taraf: Kitap Listesi -->
        <div class="book-list">
        <% books.forEach(book => { %>
        <div class="book-card">
            <img src="/images/default_book.png" alt="<%= book.book_name %>">
            
            <p class="book-title"><%= book.book_name %> <strong><%= book.author %></strong></p>
            <p class="book-price"><%= book.price  %> TL</p>
            <p class="book-genre"><%= book.genre %></p>
            <button class="btn-shadow" onclick="addToCart('<%= book.id %>')">Sepete Ekle</button>
            <button class="btn-shadow" onclick="addToFavorites('<%= book.id %>')">Favorilere Ekle</button>
        </div>
        <% }) %>
</div>
    </div>
<script>
  const currentUserId = "<%= userId %>";
</script>
<%- include('partials/footer2') %>